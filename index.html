<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Triangle Drawing System</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="controls">
    <h2>Triangle Drawing System</h2>
    <div class="control-group">
      <h3>Add Triangle Vertices</h3>
      <p>Click on the canvas to add triangle vertices, or use coordinates below. Every 3 points form a triangle.</p>
      
      <label for="x-coordinate">X Coordinate:</label>
      <input type="number" id="x-coordinate" step="0.1" max="1000" min="-1000">
      
      <label for="y-coordinate">Y Coordinate:</label>
      <input type="number" id="y-coordinate" step="0.1" max="1000" min="-1000">
      
      <button onclick="addPointManually()">Add Point</button>
    </div>
    
    <div class="control-group">
      <h3>Triangles</h3>
      <button onclick="clearAllTriangles()" style="background-color:var(--danger-color);">Clear All Triangles</button>
      <p><i>Drag triangle vertices to move them. Double-click canvas to add a vertex. Each 3 points form a triangle.</i></p>
      <div id="control-points-list"></div>
    </div>

    <div class="control-group">
      <h3>Affine Animation</h3>
      <label for="axis-order">Choose axis order for mirroring:</label>
      <select id="axis-order">
        <option value="xy">First X, then Y</option>
        <option value="yx">First Y, then X</option>
      </select>
      <label for="animation-duration" style="margin-top:10px;">Animation duration (100-10000ms):</label>
      <input type="number" id="animation-duration" min="100" max="10000" value="3000" step="10" style="width:120px;">
      <label for="scaling-coefficient" style="margin-top:10px;">Scaling coefficient (0.01-100):</label>
      <input type="number" id="scaling-coefficient" min="0.01" max="100" step="0.01" value="1" style="width:120px;">
      <div style="margin: 20px 0; display: flex; flex-direction: row;">
        <label for="continuous-animation-checkbox" style="width: 400px;">Continuous animation</label>
        <input type="checkbox" id="continuous-animation-checkbox" size="20" style="width: 20px; height: 20px; margin: auto;">
      </div>
      <button id="start-affine-animation">Start Mirror Animation</button>
      <button id="stop-affine-animation" style="background-color:var(--danger-color);margin-left:10px;">Stop</button>
      <button id="continue-affine-animation" style="background-color:#ffc107;margin-left:10px;">Continue</button>
      <button id="reset-affine-animation" style="background-color:#aaa;margin-left:10px;">Reset</button>
      <p style="font-size:0.9em;">All triangles will be mirrored at the same time by the selected axis order, then returned.</p>
    </div>
    
    <div class="control-group">
      <h3>Results</h3>
      <button id="download-canvas-image" style="background-color:var(--primary-color);">Download Image</button>
      <button id="download-result-matrix" style="background-color:var(--primary-color); color:white; margin-left:10px;" disabled>Download Result Matrix</button>
      <div id="affine-matrix-block" style="margin: 15px 0;"></div>
    </div>
    
    <div class="control-group">
      <h3>Tips</h3>
      <ul>
        <li>Use the mouse wheel to zoom in/out</li>
        <li>Drag the canvas to move around</li>
        <li>Drag triangle vertices to move them</li>
        <li>Double-click canvas to add a vertex</li>
        <li>At least 3 points are needed for a triangle</li>
      </ul>
    </div>
  </div>
  
  <div id="canvas-container">
    <canvas id="canvas" height="1000px" width="1500px"></canvas>
  </div>
  
  <script src="script.js"></script>
  <script src="affine.js"></script>
</body>
</html>
